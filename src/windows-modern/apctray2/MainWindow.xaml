<Window x:Class="apctray2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="apcctrl - Status do UPS" Height="620" Width="780"
        WindowStartupLocation="CenterScreen"
        Background="#1E1E1E">
  
  <Window.Resources>
    <!-- Estilo para cards modernos -->
    <Style x:Key="CardStyle" TargetType="Border">
      <Setter Property="Background" Value="#2D2D30"/>
      <Setter Property="BorderBrush" Value="#3E3E42"/>
      <Setter Property="BorderThickness" Value="1"/>
      <Setter Property="CornerRadius" Value="8"/>
      <Setter Property="Padding" Value="16"/>
      <Setter Property="Margin" Value="8"/>
    </Style>
    
    <Style x:Key="CardTitleStyle" TargetType="TextBlock">
      <Setter Property="FontSize" Value="14"/>
      <Setter Property="FontWeight" Value="SemiBold"/>
      <Setter Property="Foreground" Value="#E0E0E0"/>
      <Setter Property="Margin" Value="0,0,0,12"/>
    </Style>
    
    <Style x:Key="MetricLabelStyle" TargetType="TextBlock">
      <Setter Property="FontSize" Value="11"/>
      <Setter Property="Foreground" Value="#AAAAAA"/>
      <Setter Property="Margin" Value="0,0,0,4"/>
    </Style>
    
    <Style x:Key="MetricValueStyle" TargetType="TextBlock">
      <Setter Property="FontSize" Value="24"/>
      <Setter Property="FontWeight" Value="Bold"/>
      <Setter Property="Foreground" Value="#FFFFFF"/>
    </Style>
    
    <Style x:Key="ModernButton" TargetType="Button">
      <Setter Property="Background" Value="#3E3E42"/>
      <Setter Property="Foreground" Value="#E0E0E0"/>
      <Setter Property="BorderThickness" Value="0"/>
      <Setter Property="Padding" Value="16,8"/>
      <Setter Property="FontSize" Value="13"/>
      <Setter Property="Cursor" Value="Hand"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border Background="{TemplateBinding Background}" 
                    CornerRadius="6"
                    Padding="{TemplateBinding Padding}">
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#505050"/>
        </Trigger>
      </Style.Triggers>
    </Style>
  </Window.Resources>
  
  <Grid Margin="16">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Header com toggle de tema -->
    <Grid Grid.Row="0" Margin="0,0,0,12">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="âš¡" FontSize="24" Margin="0,0,8,0" Foreground="#00A4EF"/>
        <StackPanel>
          <TextBlock Text="{Binding UpsName}" FontSize="18" FontWeight="Bold" Foreground="#E0E0E0"/>
          <TextBlock Text="{Binding Status}" FontSize="12" Foreground="#AAAAAA"/>
        </StackPanel>
      </StackPanel>
      
      <ToggleButton x:Name="ThemeToggle" 
                    HorizontalAlignment="Right"
                    Width="50" Height="26"
                    Content="ðŸŒ™"
                    IsChecked="{Binding IsDarkMode, Mode=TwoWay}"
                    Background="#3E3E42"
                    BorderThickness="0"
                    Foreground="#E0E0E0"
                    Cursor="Hand"/>
    </Grid>

    <!-- Status rÃ¡pido -->
    <Border Grid.Row="1" Style="{StaticResource CardStyle}" Background="#0078D4">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <StackPanel>
          <TextBlock Text="RUNTIME" Style="{StaticResource MetricLabelStyle}" Foreground="#FFFFFF"/>
          <TextBlock Text="{Binding TimeLeft}" Style="{StaticResource MetricValueStyle}"/>
        </StackPanel>
        
        <Rectangle Grid.Column="1" Width="1" Fill="#FFFFFF" Opacity="0.3" Margin="16,0"/>
        
        <StackPanel Grid.Column="2">
          <TextBlock Text="TEMPERATURA" Style="{StaticResource MetricLabelStyle}" Foreground="#FFFFFF"/>
          <TextBlock Text="{Binding Temperature}" Style="{StaticResource MetricValueStyle}"/>
        </StackPanel>
      </Grid>
    </Border>

    <!-- MÃ©tricas principais -->
    <Grid Grid.Row="2" Margin="0,8,0,0">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <!-- Bateria -->
      <Border Grid.Row="0" Grid.Column="0" Style="{StaticResource CardStyle}">
        <StackPanel>
          <TextBlock Text="ðŸ”‹ BATERIA" Style="{StaticResource CardTitleStyle}"/>
          <Grid Margin="0,8,0,0">
            <ProgressBar Height="24" 
                         Minimum="0" Maximum="100" 
                         Value="{Binding BatteryPercent}"
                         Background="#3E3E42"
                         Foreground="#10B981"
                         BorderThickness="0"/>
            <TextBlock Text="{Binding BatteryPercent, StringFormat='{}{0}%'}" 
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       FontWeight="Bold"
                       Foreground="#FFFFFF"/>
          </Grid>
        </StackPanel>
      </Border>

      <!-- Carga -->
      <Border Grid.Row="0" Grid.Column="1" Style="{StaticResource CardStyle}">
        <StackPanel>
          <TextBlock Text="âš¡ CARGA" Style="{StaticResource CardTitleStyle}"/>
          <Grid Margin="0,8,0,0">
            <ProgressBar Height="24" 
                         Minimum="0" Maximum="100" 
                         Value="{Binding LoadPercent}"
                         Background="#3E3E42"
                         Foreground="#F59E0B"
                         BorderThickness="0"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
              <TextBlock Text="{Binding LoadPercent, StringFormat='{}{0}%'}" 
                         FontWeight="Bold" Foreground="#FFFFFF" Margin="0,0,4,0"/>
              <TextBlock Text="Â·" Foreground="#AAAAAA" Margin="0,0,4,0"/>
              <TextBlock Text="{Binding LoadWatts}" FontWeight="Bold" Foreground="#FFFFFF"/>
            </StackPanel>
          </Grid>
        </StackPanel>
      </Border>

      <!-- TensÃ£o de Entrada -->
      <Border Grid.Row="1" Grid.Column="0" Style="{StaticResource CardStyle}">
        <StackPanel>
          <TextBlock Text="TENSÃƒO ENTRADA" Style="{StaticResource MetricLabelStyle}"/>
          <TextBlock Text="{Binding InputVoltage}" FontSize="28" FontWeight="Bold" Foreground="#FFFFFF"/>
          <TextBlock Text="{Binding LineFreq}" FontSize="11" Foreground="#AAAAAA" Margin="0,4,0,0"/>
        </StackPanel>
      </Border>

      <!-- TensÃ£o de SaÃ­da -->
      <Border Grid.Row="1" Grid.Column="1" Style="{StaticResource CardStyle}">
        <StackPanel>
          <TextBlock Text="TENSÃƒO SAÃDA" Style="{StaticResource MetricLabelStyle}"/>
          <TextBlock Text="{Binding OutputVoltage}" FontSize="28" FontWeight="Bold" Foreground="#FFFFFF"/>
        </StackPanel>
      </Border>
    </Grid>

    <!-- BotÃµes de aÃ§Ã£o -->
    <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
      <Button Content="ðŸ”„ Atualizar" Click="Refresh_Click" Style="{StaticResource ModernButton}" Margin="0,0,8,0"/>
      <Button Content="ðŸ”§ Autoteste" Click="SelfTest_Click" Style="{StaticResource ModernButton}" Margin="0,0,8,0"/>
      <Button Content="âœ• Fechar" Click="Close_Click" Style="{StaticResource ModernButton}"/>
    </StackPanel>
  </Grid>
</Window>
